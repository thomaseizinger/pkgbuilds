name: PKGBUILD CI

on: push

jobs:
  check:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        package: [satstack-bin, git-absorb-bin, tensorflow115, photoprism, photoprism-git]
        include:
          - package: photoprism
            aurDeps: tensorflow115
          - package: photoprism-git
            aurDeps: tensorflow115
    steps:
    - uses: actions/checkout@v2

    - name: Makepkg Build and Check
      uses: edlanglois/pkgbuild-action@v1
      with:
        pkgdir: ./${{ matrix.package }}
        aurDeps: ./${{ matrix.aurDeps }}
